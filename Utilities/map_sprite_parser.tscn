[gd_scene load_steps=7 format=2]

[ext_resource path="res://Utilities/map_sprite_parser.gd" type="Script" id=1]
[ext_resource path="res://Map Sprites/Brigand (M) Axe {IS}-stand.png" type="Texture2D" id=2]
[ext_resource path="res://Map Sprites/Brigand (M) Axe {IS}-walk.png" type="Texture2D" id=3]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
uniform vec3 transparent_color = vec3(128.0, 160.0, 128.0);

void fragment() {
	COLOR = texture(TEXTURE, UV);
	if (COLOR.rgb * 255.0 == transparent_color){
		COLOR = vec4(0)
		}
	}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/transparent_color = Vector3( 128, 160, 128 )

[sub_resource type="ViewportTexture" id=3]
viewport_path = NodePath("Renderer")

[node name="Node2D" type="Node2D"]
script = ExtResource( 1 )
standing_offset_y = -16

[node name="Standing" type="Sprite2D" parent="."]
position = Vector2( -80, 48 )
texture = ExtResource( 2 )

[node name="Walking" type="Sprite2D" parent="."]
position = Vector2( -32, 240 )
texture = ExtResource( 3 )

[node name="Renderer" type="SubViewport" parent="."]
size = Vector2( 128, 160 )
transparent_bg = true
disable_3d = true

[node name="Shader Controller" type="Node2D" parent="Renderer"]
material = SubResource( 2 )

[node name="Standing 1" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Standing"]]
use_parent_material = true
position = Vector2( 16, 16 )
texture = ExtResource( 2 )
centered = false
offset = Vector2( -8, -16 )
vframes = 3

[node name="Standing 2" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Standing"]]
use_parent_material = true
position = Vector2( 48, 16 )
texture = ExtResource( 2 )
centered = false
offset = Vector2( -8, -16 )
vframes = 3
frame = 1

[node name="Standing 3" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Standing"]]
use_parent_material = true
position = Vector2( 80, 16 )
texture = ExtResource( 2 )
centered = false
offset = Vector2( -8, -16 )
vframes = 3
frame = 2

[node name="Walking 1" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
material = SubResource( 2 )
position = Vector2( 0, 32 )
texture = ExtResource( 3 )
centered = false
vframes = 15

[node name="Walking 2" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 32, 32 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 1

[node name="Walking 3" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 64, 32 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 2

[node name="Walking 4" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 96, 32 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 3

[node name="Walking 5" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 0, 64 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 4

[node name="Walking 6" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 32, 64 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 5

[node name="Walking 7" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 64, 64 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 6

[node name="Walking 8" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 96, 64 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 7

[node name="Walking 9" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 0, 96 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 8

[node name="Walking 10" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 32, 96 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 9

[node name="Walking 11" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 64, 96 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 10

[node name="Walking 12" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 96, 96 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 11

[node name="Walking 13" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 0, 128 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 12

[node name="Walking 14" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 32, 128 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 13

[node name="Walking 15" type="Sprite2D" parent="Renderer/Shader Controller" groups=["Walking"]]
use_parent_material = true
position = Vector2( 64, 128 )
texture = ExtResource( 3 )
centered = false
vframes = 15
frame = 14

[node name="Panel" type="Panel" parent="."]
offset_left = 208.0
offset_top = 112.0
offset_right = 304.0
offset_bottom = 176.0

[node name="TextEdit" type="TextEdit" parent="Panel"]
offset_right = 96.0
offset_bottom = 32.0

[node name="Button" type="Button" parent="Panel"]
offset_top = 32.0
offset_right = 96.0
offset_bottom = 64.0
text = "Create Image"

[node name="Parser" type="Sprite2D" parent="."]
texture = SubResource( 3 )
centered = false
flip_v = true

[connection signal="pressed" from="Panel/Button" to="." method="_on_button_pressed"]
